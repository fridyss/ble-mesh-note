# 3 MESH网络

本节的结构与2.1节中描述的分层体系结构相同。另外，还有关于mesh安全性和mesh网络管理的章节。

## 3.1 约定

以下约定应用于此规范文档。

### 3.1.1 字节顺序和字段组合

1. 对于网络层，下传输层，上传输层，mesh bean ，provisioning，所有多字节的数值都要以大端字节发送, 如第3.1.1.1节所述。
2. 对于访问层，基础模型，所有的多字节数值都应该是小端字节，如3.1.1.2节所述。

网络数据结构是由多个字段组成的，这些字段从上到下依次列在表中，从左到右依次出现在相应的图中。表3.1所示，一个由多个字段组成的示例数据结构的实例。

| 字段 | 大小(bits) | 字段的内容描述 |
| --- | --- | --- |
| 字段0 | 4  | 这个字段的起始位置是0字节 |
| 字段1 | 12 | 该字段的起始位置为0字节，结束位置为1字节 |
| 字段2 | 16 | 该字段的起始位置为2字节，结束位置为3字节  |
*表3.1 字段组合例程*

为了将表中定义的数据结构，转换为使用大端模式表示，高字节在低内存地址。如图3.1所示。
![](https://github.com/fridyss/ble-mesh-note/blob/master/material/field%20ordering%20example%20big%20endian.png)
*图3.1 大端字段组合*

例如 ，字段0的宽度为4位，值为0x6，字段1的宽度为12位，值为0x987，字段2的宽度为16位，值为0x1234，二进制数的值是0x69871234，传输顺序应该按0x69、0x87、0x12、0x34。

为了将表中定义的数据结构，转换为使用小端模式表示，低字节在低内存地址。如图3.2所示。
![](https://github.com/fridyss/ble-mesh-note/blob/master/material/field%20ordering%20example%20little%20endian.png)
*图3.2 小端字段组合*

例如，字段0的宽度为4位，值为0x6，字段1的宽度为12位，值为0x987，字段2宽16位，值为0x1234。二进制数的值0x12349876，传输顺序应该按0x76, 0x98, 0x 34, 0x12。

#### 3.1.1.1 大端

当以“大端”(也称为“网络字节顺序”)发送的多字节值被定义时，应用本节中的约定。例如，值0x123456应该被传输为0x12、0x34和0x56(MSB优先)。

#### 3.1.2.2 小端
当在“小端”中定义多字节值时，应用本节中的约定。例如，值0x123456应该被传输为0x56、0x34和0x12(LSB优先)。